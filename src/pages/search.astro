---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout pageTitle="Search" description="Search blog posts and content">
	<div class="search-container" data-pagefind-ignore>
		<h1>Search</h1>
		<p>Find blog posts, projects, and other content on this site.</p>
		
		<div id="search"></div>
		
		<script is:inline>
			window.addEventListener('DOMContentLoaded', () => {
				const script = document.createElement('script');
				script.src = '/pagefind/pagefind-ui.js';
				script.onload = () => {
					new PagefindUI({ 
						element: "#search",
						showImages: false,
						showSubResults: true,
						excerptLength: 15,
						resetStyles: false
					});
				};
				document.head.appendChild(script);
			});
		</script>
	</div>
</BaseLayout>

<style>
	.search-container {
		max-width: var(--wide-content-width);
		margin: 0 auto;
	}
	
	/* Style the Pagefind search UI to match our theme */
	:global(.pagefind-ui) {
		--pagefind-ui-primary: var(--color-primary);
		--pagefind-ui-text: var(--color-text-primary);
		--pagefind-ui-background: var(--color-bg);
		--pagefind-ui-border: var(--color-border);
		--pagefind-ui-tag: var(--color-bg-tertiary);
		--pagefind-ui-border-width: 1px;
		--pagefind-ui-border-radius: var(--radius-md);
		--pagefind-ui-font: 'Inter', system-ui, sans-serif;
	}
	
	:global(.pagefind-ui__search-input) {
		background: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: var(--radius-lg);
		padding: var(--spacing-md);
		font-size: var(--font-size-lg);
		transition: all var(--transition-fast);
		width: 100%;
		max-width: none;
	}
	
	:global(.pagefind-ui__search-input:focus) {
		outline: none;
		border-color: var(--color-primary);
		box-shadow: 0 0 0 3px var(--color-primary-light);
	}
	
	:global(.pagefind-ui__result) {
		background: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: var(--radius-lg);
		padding: var(--spacing-lg);
		margin-bottom: var(--spacing-md);
		transition: all var(--transition-fast);
	}
	
	:global(.pagefind-ui__result:hover) {
		border-color: var(--color-border-hover);
		box-shadow: var(--shadow-md);
		transform: translateY(-1px);
	}
	
	:global(.pagefind-ui__result-link) {
		color: var(--color-text-primary);
		text-decoration: none;
		font-weight: var(--font-weight-semibold);
		font-size: var(--font-size-xl);
		line-height: var(--line-height-tight);
	}
	
	:global(.pagefind-ui__result-link:hover) {
		color: var(--color-primary);
	}
	
	:global(.pagefind-ui__result-excerpt) {
		color: var(--color-text-secondary);
		line-height: var(--line-height-relaxed);
		margin-top: var(--spacing-xs);
	}
	
	:global(.pagefind-ui__result-tag) {
		background: var(--color-bg-tertiary);
		color: var(--color-text-secondary);
		border: 1px solid var(--color-border);
		border-radius: var(--radius-md);
		padding: 0.25rem 0.5rem;
		font-size: var(--font-size-sm);
		margin-right: var(--spacing-xs);
		margin-top: var(--spacing-xs);
	}
	
	:global(.pagefind-ui__message) {
		color: var(--color-text-secondary);
		font-size: var(--font-size-base);
		margin-bottom: var(--spacing-lg);
	}
	
	:global(.pagefind-ui__button) {
		background: var(--color-primary);
		color: white;
		border: none;
		border-radius: var(--radius-md);
		padding: var(--spacing-sm) var(--spacing-md);
		font-size: var(--font-size-base);
		font-weight: var(--font-weight-medium);
		cursor: pointer;
		transition: all var(--transition-fast);
	}
	
	:global(.pagefind-ui__button:hover) {
		background: var(--color-primary-hover);
		transform: translateY(-1px);
	}
	
	/* Dark mode adjustments */
	[data-theme="dark"] :global(.pagefind-ui__search-input) {
		color: var(--color-text-primary);
	}
	
	[data-theme="dark"] :global(.pagefind-ui__search-input::placeholder) {
		color: var(--color-text-tertiary);
	}
</style>