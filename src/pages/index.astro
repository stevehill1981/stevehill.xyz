---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import { getReadingTime } from '../utils/readingTime.js';
import {
	siRuby, siRubyonrails, siPython, siPostgresql, siRedis,
	siKubernetes, siDocker, siAnsible, siElixir, siPhoenixframework,
	siRust, siTauri, siSwift, siTypescript, siJavascript,
	siAstro, siUnity, siDotnet, siTailwindcss, siGithubactions,
	siHtml5, siMysql, siNodedotjs
} from 'simple-icons';

// Rotating taglines pool
const taglines = [
	"From 6502 Assembly<br>to Rails 8",
	"Building Software That Lasts<br>Since 2006",
	"Rescuing Legacy Systems<br>Since 2006",
	"Technical Rescuer<br>Assembly Teacher",
	"Fixing What Others<br>Over-Engineered",
	"Teaching Assembly Across<br>C64, ZX Spectrum, NES & Amiga",
	"Building Boring Software<br>That Works",
	"Sustainable Software<br>Pragmatic Engineering",
	"Rails • Phoenix<br>6502 Assembly",
	"Senior Engineer Specializing<br>in Technical Rescue"
];

// Get recent blog posts
const allPosts = await getCollection('blog');
const recentPosts = allPosts
	.sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())
	.slice(0, 7);

// Get reading times for recent posts
const recentPostsWithReadingTime = recentPosts.map((post) => {
	return {
		...post,
		readingTime: getReadingTime(post.body)
	};
});

// Get projects, sorted with featured ones first
const allProjects = (await getCollection('projects', ({ data }) => {
	return data.draft !== true;
})).sort((a, b) => {
		// Featured projects first
		const aFeatured = a.data.featured ?? false;
		const bFeatured = b.data.featured ?? false;
		if (aFeatured && !bFeatured) return -1;
		if (!aFeatured && bFeatured) return 1;
		// Then sort alphabetically by title
		return a.data.title.localeCompare(b.data.title);
	});

// Technology icon mapping using simple-icons
type SimpleIcon = { svg: string; hex: string; title: string };
const techIconMap: Record<string, SimpleIcon> = {
	// Languages
	ruby: siRuby,
	python: siPython,
	typescript: siTypescript,
	javascript: siJavascript,
	swift: siSwift,
	rust: siRust,
	'c#': siDotnet,
	csharp: siDotnet,

	// Frameworks
	rails: siRubyonrails,
	'ruby on rails': siRubyonrails,
	elixir: siElixir,
	phoenix: siPhoenixframework,
	'phoenix liveview': siPhoenixframework,
	liveview: siPhoenixframework,
	astro: siAstro,
	'tailwind css': siTailwindcss,
	tailwindcss: siTailwindcss,
	unity: siUnity,
	tauri: siTauri,

	// Databases
	postgresql: siPostgresql,
	mysql: siMysql,
	redis: siRedis,
	timescaledb: siPostgresql, // Use PostgreSQL icon

	// Infrastructure
	docker: siDocker,
	kubernetes: siKubernetes,
	ansible: siAnsible,
	'github actions': siGithubactions,

	// Other
	html: siHtml5,
	'html processing': siHtml5,
	node: siNodedotjs,
};

const getTechIcon = (tech: string): string => {
	const normalized = tech.toLowerCase();
	const icon = techIconMap[normalized];
	if (icon) {
		return `<svg viewBox="0 0 24 24" fill="#${icon.hex}">${icon.svg}</svg>`;
	}
	// Fallback: show first letter in a circle
	return `<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#6b7280"/><text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">${tech.charAt(0).toUpperCase()}</text></svg>`;
};
---

<BaseLayout pageTitle="Home">
	<div class="hero">
		<!-- Floating geometric shapes -->
		<div class="hero-shapes" aria-hidden="true">
			<div class="shape shape-1"></div>
			<div class="shape shape-2"></div>
			<div class="shape shape-3"></div>
			<div class="shape shape-4"></div>
			<div class="shape shape-5"></div>
		</div>
		<div class="hero-content">
			<h1 class="hero-title">
				<span class="hero-title-first">Steve</span>
				<span class="hero-title-last">Hill</span>
			</h1>
			<div class="hero-tagline">
				<p id="rotating-tagline"></p>
			</div>
		</div>
	</div>

	<!-- Decorative section transition -->
	<div class="section-transition" aria-hidden="true">
		<div class="transition-line"></div>
		<div class="transition-dots">
			<span></span><span></span><span></span>
		</div>
		<div class="transition-line"></div>
	</div>

	<div class="home-content-grid">
		<section class="home-section">
			<div class="section-header">
				<h2 class="recent-posts-heading">Recent Posts</h2>
				<a href="/blog" class="view-all">View all posts →</a>
			</div>

			<div class="recent-posts">
				{recentPostsWithReadingTime.map((post) => (
					<a href={`/blog/${post.slug}`} class="post-card-link">
						<article class="post-card">
							<div class="post-meta">
								<time>{post.data.pubDate.toLocaleDateString('en-US', {
									year: 'numeric',
									month: 'short',
									day: 'numeric'
								})}</time>
								<span class="reading-time">{post.readingTime} min read</span>
							</div>
							<h3 class="post-title">{post.data.title}</h3>
							<p class="post-excerpt">{post.data.excerpt}</p>
						</article>
					</a>
				))}
			</div>
		</section>

		<section class="home-section">
			<div class="section-header">
				<h2 class="projects-heading">Projects</h2>
				<a href="/projects" class="view-all">View all projects →</a>
			</div>

			<div class="projects-grid">
				{allProjects.filter(project => project.data.featured).map((project) => (
					<a href={`/projects/${project.slug}`} class="project-card-link">
						<article class={`project-card-home ${project.data.featured ? 'featured' : ''}`}>
							<div class="project-header project-gradient" data-project={project.data.title}>
								<h3>{project.data.title}</h3>
								{project.data.technologies && project.data.technologies.length > 0 && (
									<div class="tech-icons">
										{project.data.technologies.slice(0, 3).map((tech) => (
											<span class="tech-badge" title={tech} set:html={getTechIcon(tech)}></span>
										))}
									</div>
								)}
							</div>
							<div class="project-content">
								<p>{project.data.description}</p>
							</div>
						</article>
					</a>
				))}
			</div>
		</section>
	</div>
</BaseLayout>

<script define:vars={{ taglines }}>
	// Randomly select and display a tagline on page load
	const randomTagline = taglines[Math.floor(Math.random() * taglines.length)];
	document.getElementById('rotating-tagline').innerHTML = randomTagline;
</script>

<script>
	// Scroll-triggered animations with progressive enhancement
	// Content is visible by default; animations only enabled when JS works
	function initScrollAnimations() {
		// Enable scroll animations only after JS confirms it's working
		const contentGrid = document.querySelector('.home-content-grid');
		if (contentGrid) {
			contentGrid.classList.add('js-scroll-animations');
		}

		const observer = new IntersectionObserver((entries) => {
			entries.forEach((entry) => {
				if (entry.isIntersecting) {
					const delay = entry.target.dataset.delay || 0;
					setTimeout(() => {
						entry.target.classList.add('animate-in');
					}, delay * 100);
					observer.unobserve(entry.target);
				}
			});
		}, {
			threshold: 0.1,
			rootMargin: '0px 0px -50px 0px'
		});

		document.querySelectorAll('.post-card-link, .project-card-link').forEach((el, i) => {
			el.dataset.delay = String(i % 4);
			observer.observe(el);
		});

		document.querySelectorAll('.section-header').forEach((el) => {
			observer.observe(el);
		});
	}

	initScrollAnimations();
	document.addEventListener('astro:page-load', initScrollAnimations);
</script>

<style>
	.hero {
		padding: var(--spacing-2xl) 0;
		width: 100vw;
		margin-left: calc(-50vw + 50%);
		margin-right: calc(-50vw + 50%);
		margin-bottom: var(--spacing-2xl);
		/* Cycling through 8 vibrant color combinations */
		background: linear-gradient(
			135deg,
			var(--color-orange-vibrant) 0%,
			var(--color-rose) 12.5%,
			var(--color-purple-vibrant) 25%,
			var(--color-blue) 37.5%,
			var(--color-green) 50%,
			var(--color-orange) 62.5%,
			var(--color-violet) 75%,
			var(--color-pink) 87.5%,
			var(--color-orange-vibrant) 100%
		);
		background-size: 400% 400%;
		animation: gradient-cycle 60s ease-in-out infinite;
		position: relative;
		overflow: hidden;
	}

	@media (prefers-reduced-motion: reduce) {
		.hero {
			animation: none;
			background-position: 0% 50%;
		}
	}

	.hero-content {
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 var(--spacing-lg);
		display: flex;
		align-items: center;
		gap: var(--spacing-2xl);
	}

	/* Add subtle texture overlay for depth */
	.hero::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-image:
			url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E"),
			radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
			radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.08) 0%, transparent 50%);
		pointer-events: none;
		opacity: 0.5;
	}

	@keyframes gradient-cycle {
		0% {
			background-position: 0% 50%;
		}
		25% {
			background-position: 100% 75%;
		}
		50% {
			background-position: 100% 25%;
		}
		75% {
			background-position: 0% 75%;
		}
		100% {
			background-position: 0% 50%;
		}
	}

	/* Floating geometric shapes */
	.hero-shapes {
		position: absolute;
		inset: 0;
		overflow: hidden;
		pointer-events: none;
	}

	.shape {
		position: absolute;
		border-radius: 50%;
		background: rgba(0, 0, 0, 0.15);
		backdrop-filter: blur(1px);
		animation: float 20s ease-in-out infinite;
	}

	.shape-1 {
		width: 300px;
		height: 300px;
		top: -100px;
		right: 10%;
		animation-delay: 0s;
		animation-duration: 25s;
	}

	.shape-2 {
		width: 150px;
		height: 150px;
		bottom: 20%;
		left: 5%;
		animation-delay: -5s;
		animation-duration: 20s;
	}

	.shape-3 {
		width: 200px;
		height: 200px;
		top: 30%;
		right: 25%;
		border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
		animation-delay: -10s;
		animation-duration: 22s;
	}

	.shape-4 {
		width: 100px;
		height: 100px;
		bottom: 10%;
		right: 15%;
		animation-delay: -15s;
		animation-duration: 18s;
	}

	.shape-5 {
		width: 80px;
		height: 80px;
		top: 20%;
		left: 15%;
		border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
		animation-delay: -7s;
		animation-duration: 23s;
	}

	@keyframes float {
		0%, 100% {
			transform: translate(0, 0) rotate(0deg) scale(1);
		}
		25% {
			transform: translate(30px, -30px) rotate(5deg) scale(1.05);
		}
		50% {
			transform: translate(-20px, 20px) rotate(-5deg) scale(0.95);
		}
		75% {
			transform: translate(15px, 15px) rotate(3deg) scale(1.02);
		}
	}

	@media (prefers-reduced-motion: reduce) {
		.shape {
			animation: none;
		}
	}
	
	.hero-title {
		font-family: 'Montserrat', system-ui, sans-serif;
		font-weight: 900;
		margin: 0;
		letter-spacing: -0.03em;
		line-height: 0.85;
		text-transform: uppercase;
		text-align: left;
		position: relative;
		z-index: 1;
		display: flex;
		flex-direction: column;
		color: rgba(0, 0, 0, 0.85);
	}

	.hero-title-first {
		font-size: clamp(2rem, 5vw, 4rem);
		display: block;
		margin-left: 0;
		padding-left: 0;
	}

	.hero-title-last {
		font-size: clamp(5rem, 15vw, 12rem);
		display: block;
		margin-left: -0.08em;
		padding-left: 0;
	}

	.hero-tagline {
		font-family: 'Montserrat', system-ui, sans-serif;
		position: relative;
		z-index: 1;
		text-align: right;
		flex: 1;
	}

	.hero-tagline p {
		font-size: var(--font-size-3xl);
		font-weight: 700;
		margin: 0;
		margin-left: auto;
		text-transform: uppercase;
		letter-spacing: 0.02em;
		max-width: 600px;
		line-height: var(--line-height-tight);
		color: rgba(0, 0, 0, 0.85);
	}

	.hero-tagline p::after {
		content: '|';
		animation: blink 1s step-end infinite;
		margin-left: 0.1em;
		font-weight: 400;
	}

	@keyframes blink {
		0%, 100% { opacity: 1; }
		50% { opacity: 0; }
	}

	.hero-links {
		display: flex;
		justify-content: center;
		align-items: center;
		gap: var(--spacing-sm);
		margin-bottom: var(--spacing-xl);
		flex-wrap: wrap;
		position: relative;
		z-index: 1;
	}

	.hero-link {
		font-family: 'Inter', system-ui, sans-serif;
		font-size: var(--font-size-lg);
		font-weight: var(--font-weight-medium);
		color: rgba(255, 255, 255, 0.9);
		text-decoration: none;
		padding: 0.25rem 0.5rem;
		border-radius: var(--radius-md);
		transition: all 0.2s;
		text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
	}

	.hero-link:hover {
		color: white;
		background: rgba(255, 255, 255, 0.15);
		text-decoration: none;
		backdrop-filter: blur(10px);
	}

	.dot {
		color: rgba(255, 255, 255, 0.5);
		font-size: var(--font-size-sm);
	}
	
	.hero-social {
		display: flex;
		justify-content: center;
		gap: var(--spacing-lg);
		margin-top: var(--spacing-xl);
		position: relative;
		z-index: 1;
	}

	.social-link {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 44px;
		height: 44px;
		border-radius: var(--radius-full);
		background: rgba(255, 255, 255, 0.15);
		color: white;
		transition: all 0.2s;
		text-decoration: none;
		backdrop-filter: blur(10px);
		border: 1px solid rgba(255, 255, 255, 0.2);
	}

	.social-link:hover {
		background: rgba(255, 255, 255, 0.25);
		color: white;
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
		text-decoration: none;
		border-color: rgba(255, 255, 255, 0.3);
	}

	.icon {
		width: 20px;
		height: 20px;
	}
	
	/* Home sections */
	/* Section transition decorative element */
	.section-transition {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: var(--spacing-md);
		margin-bottom: var(--spacing-2xl);
		opacity: 0.6;
	}

	.transition-line {
		flex: 1;
		max-width: 200px;
		height: 1px;
		background: linear-gradient(90deg, transparent, var(--color-border), transparent);
	}

	.transition-dots {
		display: flex;
		gap: 8px;
	}

	.transition-dots span {
		width: 6px;
		height: 6px;
		border-radius: 50%;
		background: var(--gradient-sunrise);
		animation: pulse-dot 2s ease-in-out infinite;
	}

	.transition-dots span:nth-child(2) {
		animation-delay: 0.3s;
		background: var(--gradient-ocean);
	}

	.transition-dots span:nth-child(3) {
		animation-delay: 0.6s;
		background: var(--gradient-sunset);
	}

	@keyframes pulse-dot {
		0%, 100% { transform: scale(1); opacity: 0.6; }
		50% { transform: scale(1.3); opacity: 1; }
	}

	.home-content-grid {
		display: grid;
		grid-template-columns: 3fr 2fr;
		gap: var(--spacing-2xl);
		margin-bottom: var(--spacing-2xl);
		align-items: start;
	}

	.home-section {
		animation: fadeIn var(--transition-slow) ease-out;
		align-self: start;
	}

	.section-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: var(--spacing-lg);
	}

	.section-header h2 {
		font-size: var(--font-size-4xl);
		font-weight: 900;
		margin: 0;
		color: var(--color-text-primary);
		position: relative;
		display: inline-block;
	}

	.section-header h2::after {
		content: '';
		position: absolute;
		bottom: -4px;
		left: 0;
		width: 0;
		height: 3px;
		border-radius: 2px;
		transition: width 0.3s ease;
	}

	.section-header:hover h2::after {
		width: 100%;
	}

	.recent-posts-heading {
		background: var(--gradient-ocean);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		color: transparent;
	}

	.recent-posts-heading::after {
		background: var(--gradient-ocean);
	}

	.projects-heading {
		background: var(--gradient-sunset);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		color: transparent;
	}

	.projects-heading::after {
		background: var(--gradient-sunset);
	}

	.view-all {
		font-size: var(--font-size-sm);
		color: var(--color-primary);
		font-weight: var(--font-weight-medium);
		transition: all 0.2s ease;
		display: inline-flex;
		align-items: center;
		gap: 0.25em;
	}

	.view-all:hover {
		color: var(--color-primary-hover);
		gap: 0.5em;
	}

	/* Recent posts */
	.recent-posts {
		display: flex;
		flex-direction: column;
		gap: var(--spacing-lg);
	}

	.post-card-link {
		text-decoration: none;
		display: block;
		color: inherit;
		cursor: pointer;
	}

	.post-card {
		padding: 0 var(--spacing-lg) var(--spacing-lg) var(--spacing-lg);
		background: var(--color-surface);
		border: 1px solid var(--color-border);
		border-left: 6px solid;
		border-radius: var(--radius-lg);
		transition: all var(--transition-base);
		cursor: pointer;
	}

	/* Rotate through gradient palettes for each post card */
	.post-card-link:nth-child(1) .post-card {
		border-image: var(--gradient-sunrise) 1;
	}

	.post-card-link:nth-child(2) .post-card {
		border-image: var(--gradient-ocean) 1;
	}

	.post-card-link:nth-child(3) .post-card {
		border-image: var(--gradient-sunset) 1;
	}

	.post-card-link:nth-child(4) .post-card {
		border-image: var(--gradient-forest) 1;
	}

	.post-card-link:nth-child(5) .post-card {
		border-image: var(--gradient-tropical) 1;
	}

	.post-card-link:nth-child(6) .post-card {
		border-image: var(--gradient-cosmic) 1;
	}

	.post-card-link:nth-child(7) .post-card {
		border-image: var(--gradient-neon) 1;
	}

	.post-card:hover {
		outline: 2px solid;
		outline-offset: -1px;
	}

	/* Add gradient-specific hover glow effects */
	.post-card-link:nth-child(1) .post-card:hover {
		outline-color: var(--color-amber);
		box-shadow: 0 0 20px color-mix(in srgb, var(--color-amber) 30%, transparent), var(--shadow-md);
	}

	.post-card-link:nth-child(2) .post-card:hover {
		outline-color: var(--color-blue);
		box-shadow: 0 0 20px color-mix(in srgb, var(--color-blue) 30%, transparent), var(--shadow-md);
	}

	.post-card-link:nth-child(3) .post-card:hover {
		outline-color: var(--color-purple);
		box-shadow: 0 0 20px color-mix(in srgb, var(--color-purple) 30%, transparent), var(--shadow-md);
	}

	.post-card-link:nth-child(4) .post-card:hover {
		outline-color: var(--color-green);
		box-shadow: 0 0 20px color-mix(in srgb, var(--color-green) 30%, transparent), var(--shadow-md);
	}

	.post-card-link:nth-child(5) .post-card:hover {
		outline-color: var(--color-pink);
		box-shadow: 0 0 20px color-mix(in srgb, var(--color-pink) 30%, transparent), var(--shadow-md);
	}

	.post-card-link:nth-child(6) .post-card:hover {
		outline-color: var(--color-purple);
		box-shadow: 0 0 20px color-mix(in srgb, var(--color-purple) 30%, transparent), var(--shadow-md);
	}

	.post-card-link:nth-child(7) .post-card:hover {
		outline-color: var(--color-cyan);
		box-shadow: 0 0 20px color-mix(in srgb, var(--color-cyan) 30%, transparent), var(--shadow-md);
	}

	.post-meta {
		display: flex;
		gap: var(--spacing-sm);
		font-size: var(--font-size-sm);
		color: var(--color-text-tertiary);
		margin-bottom: var(--spacing-xs);
		padding-top: var(--spacing-lg);
	}

	.reading-time {
		color: var(--color-text-muted);
	}

	.post-title {
		font-size: var(--font-size-xl);
		margin: 0 0 var(--spacing-sm) 0;
		line-height: var(--line-height-tight);
		color: var(--color-text-primary);
		font-weight: var(--font-weight-semibold);
		transition: all 0.2s ease;
	}

	/* Match post title hover color to card gradient */
	.post-card-link:nth-child(1):hover .post-title {
		background: var(--gradient-sunrise);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.post-card-link:nth-child(2):hover .post-title {
		background: var(--gradient-ocean);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.post-card-link:nth-child(3):hover .post-title {
		background: var(--gradient-sunset);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.post-card-link:nth-child(4):hover .post-title {
		background: var(--gradient-forest);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.post-card-link:nth-child(5):hover .post-title {
		background: var(--gradient-tropical);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.post-card-link:nth-child(6):hover .post-title {
		background: var(--gradient-cosmic);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.post-card-link:nth-child(7):hover .post-title {
		background: var(--gradient-neon);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.post-excerpt {
		color: var(--color-text-secondary);
		line-height: var(--line-height-relaxed);
		margin: 0;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	/* Projects grid */
	.projects-grid {
		display: flex;
		flex-direction: column;
		gap: var(--spacing-lg);
	}

	.project-card-link {
		text-decoration: none;
		display: block;
		color: inherit;
		cursor: pointer;
	}

	.project-card-home {
		background: var(--color-surface);
		border: 2px solid var(--color-border);
		border-radius: var(--radius-lg);
		overflow: hidden;
		transition: all var(--transition-base);
		cursor: pointer;
	}

	/* Match border colors to gradient headers */
	.project-card-home:has(.project-gradient[data-project="Rachel - Strategic Card Game"]) {
		border-color: var(--color-pink-light);
	}

	.project-card-home:has(.project-gradient[data-project="shiki-highlight-api"]) {
		border-color: var(--color-blue);
	}

	.project-card-home:has(.project-gradient[data-project="remark-shiki-highlight-api"]) {
		border-color: var(--color-purple);
	}

	.project-card-home:has(.project-gradient[data-project="PuTTY Themer"]) {
		border-color: var(--color-indigo-light);
	}

	.project-card-home:hover {
		box-shadow: var(--shadow-lg);
	}

	/* Project-specific gradient glow effects on hover */
	.project-card-home:has(.project-gradient[data-project="Rachel - Strategic Card Game"]):hover {
		filter: drop-shadow(0 8px 24px color-mix(in srgb, var(--color-pink-light) 40%, transparent));
	}

	.project-card-home:has(.project-gradient[data-project="shiki-highlight-api"]):hover {
		filter: drop-shadow(0 8px 24px color-mix(in srgb, var(--color-blue) 40%, transparent));
	}

	.project-card-home:has(.project-gradient[data-project="remark-shiki-highlight-api"]):hover {
		filter: drop-shadow(0 8px 24px color-mix(in srgb, var(--color-purple) 40%, transparent));
	}

	.project-card-home:has(.project-gradient[data-project="PuTTY Themer"]):hover {
		filter: drop-shadow(0 8px 24px color-mix(in srgb, var(--color-indigo-light) 40%, transparent));
	}

	.project-header {
		padding: var(--spacing-lg);
		color: white;
		display: flex;
		justify-content: space-between;
		align-items: center;
		gap: var(--spacing-md);
		position: relative;
	}

	.project-gradient {
		filter: saturate(1.25);
	}

	.project-header h3 {
		margin: 0;
		font-size: var(--font-size-xl);
		font-weight: var(--font-weight-semibold);
		text-align: left;
	}

	.tech-icons {
		display: flex;
		gap: var(--spacing-xs);
	}

	.tech-badge {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 28px;
		height: 28px;
		background: rgba(255, 255, 255, 0.95);
		border: 1px solid rgba(255, 255, 255, 0.3);
		border-radius: var(--radius-full);
		backdrop-filter: blur(10px);
		transition: all var(--transition-fast);
		padding: 5px;
	}

	.tech-badge :global(svg) {
		width: 100%;
		height: 100%;
	}

	.tech-badge:hover {
		background: rgba(255, 255, 255, 1);
		transform: scale(1.1);
	}

	.featured-badge {
		display: inline-block;
		margin-top: var(--spacing-xs);
		padding: 0.25rem 0.75rem;
		background: rgba(255, 255, 255, 0.2);
		border: 1px solid rgba(255, 255, 255, 0.3);
		border-radius: var(--radius-full);
		font-size: var(--font-size-xs);
		font-weight: var(--font-weight-medium);
		letter-spacing: 0.05em;
		text-transform: uppercase;
		backdrop-filter: blur(10px);
	}

	.project-card-home.featured {
		border-color: var(--color-primary);
		box-shadow: 0 0 0 1px var(--color-primary);
	}

	.project-card-home.featured:hover {
		box-shadow: var(--shadow-xl), 0 0 0 2px var(--color-primary);
	}

	.project-content {
		padding: var(--spacing-lg);
	}

	.project-content p {
		color: var(--color-text-secondary);
		line-height: var(--line-height-relaxed);
		margin: 0 0 var(--spacing-md) 0;
		font-size: var(--font-size-base);
	}

	.project-links {
		display: flex;
		justify-content: flex-start;
		align-items: center;
	}

	.github-link {
		position: relative;
		z-index: 1;
		display: inline-flex;
		align-items: center;
		gap: 0.375rem;
		font-size: var(--font-size-sm);
		color: var(--color-text-secondary);
		text-decoration: none;
		padding: 0.375rem 0.75rem;
		border: 1px solid var(--color-border);
		border-radius: var(--radius-md);
		transition: all var(--transition-fast);
	}

	.github-link:hover {
		color: var(--color-text-primary);
		border-color: var(--color-border-hover);
		background: var(--color-bg-tertiary);
	}

	/* Mobile responsive styles */
	@media (max-width: 768px) {
		/* Layout adjustments */
		.home-content-grid {
			grid-template-columns: 1fr;
			gap: var(--spacing-xl);
		}

		/* Hero section */
		.hero {
			padding: var(--spacing-xl) 0;
		}

		.hero-content {
			flex-direction: column;
			gap: var(--spacing-lg);
			text-align: center;
		}

		.hero-title {
			text-align: center;
		}

		.hero-title-first {
			font-size: clamp(1.5rem, 8vw, 2.5rem);
		}

		.hero-title-last {
			font-size: clamp(3rem, 20vw, 6rem);
		}

		.hero-tagline {
			text-align: center;
		}

		.hero-tagline p {
			font-size: var(--font-size-xl);
			margin-left: 0;
			margin-right: 0;
			max-width: 100%;
		}

		/* Section headers */
		.section-header {
			flex-direction: column;
			align-items: flex-start;
			gap: var(--spacing-xs);
		}

		.section-header h2 {
			font-size: var(--font-size-3xl);
		}

		/* Post cards */
		.post-card {
			padding: var(--spacing-md);
		}

		.post-title {
			font-size: var(--font-size-lg);
		}

		/* Project cards */
		.project-header {
			padding: var(--spacing-md);
		}

		.project-header h3 {
			font-size: var(--font-size-lg);
		}

		.project-content {
			padding: var(--spacing-md);
		}

		.project-links {
			flex-direction: column;
			gap: var(--spacing-sm);
			align-items: flex-start;
		}

		.github-link {
			width: 100%;
			justify-content: center;
		}
	}
	
	/* Project gradients */
	/* Featured projects get vibrant gradients */
	.project-gradient[data-project="Rachel - Strategic Card Game"] {
		background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
	}

	.project-gradient[data-project="shiki-highlight-api"] {
		background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
	}

	.project-gradient[data-project="remark-shiki-highlight-api"] {
		background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);
	}

	.project-gradient[data-project="PuTTY Themer"] {
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	}

	/* Non-featured projects get neutral gradients */
	.project-gradient:not([data-project="Rachel - Strategic Card Game"]):not([data-project="shiki-highlight-api"]):not([data-project="remark-shiki-highlight-api"]):not([data-project="PuTTY Themer"]) {
		background: linear-gradient(135deg, #64748b 0%, #475569 100%);
	}

	/* Dark mode gradients */
	.project-gradient[data-project="Rachel - Strategic Card Game"] {
		background: linear-gradient(135deg, #c06dd9 0%, #c73f57 100%);
	}

	.project-gradient[data-project="shiki-highlight-api"] {
		background: linear-gradient(135deg, #2563eb 0%, #0891b2 100%);
	}

	.project-gradient[data-project="remark-shiki-highlight-api"] {
		background: linear-gradient(135deg, #7c3aed 0%, #2563eb 100%);
	}

	.project-gradient[data-project="PuTTY Themer"] {
		background: linear-gradient(135deg, #4c5fd8 0%, #5a3885 100%);
	}

	.project-gradient:not([data-project="Rachel - Strategic Card Game"]):not([data-project="shiki-highlight-api"]):not([data-project="remark-shiki-highlight-api"]):not([data-project="PuTTY Themer"]) {
		background: linear-gradient(135deg, #475569 0%, #334155 100%);
	}

	/* Reduced motion support for accessibility */
	@media (prefers-reduced-motion: reduce) {
		.hero {
			animation: none;
			background-position: 0% 50%;
		}

		.hero-title {
			animation: none;
			background-position: 0% 50%;
		}

		.hero-link,
		.social-link,
		.view-all,
		.project-card-home,
		.project-link,
		.section-header h2::after {
			transition: none;
		}

		.post-card-link,
		.project-card-link,
		.section-header {
			opacity: 1;
			transform: none;
		}

		.transition-dots span {
			animation: none;
		}

		.hero-tagline p::after {
			animation: none;
			opacity: 0;
		}
	}

	/* Scroll-triggered animations - Progressive Enhancement
	   Content is visible by default. JS adds .js-scroll-animations class
	   to enable animations, ensuring content is never hidden if JS fails. */
	.js-scroll-animations .post-card-link,
	.js-scroll-animations .project-card-link {
		opacity: 0;
		transform: translateY(30px);
		transition: opacity 0.6s ease-out, transform 0.6s ease-out;
	}

	.js-scroll-animations .section-header {
		opacity: 0;
		transform: translateY(20px);
		transition: opacity 0.5s ease-out, transform 0.5s ease-out;
	}

	.js-scroll-animations .post-card-link.animate-in,
	.js-scroll-animations .project-card-link.animate-in,
	.js-scroll-animations .section-header.animate-in {
		opacity: 1;
		transform: translateY(0);
	}
</style>